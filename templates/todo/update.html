{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container">
	<h2>Update Todo</h2>
		<div>
			<label for="name">Name:</label>
			<input type="text" name="name" id="name">
		</div>
		<div>
			<label for="description">Description:</label>
			<textarea name="description" id="description"></textarea>
		</div>
		<div>
			<label for="complete">Complete:  ===== {{ todo.id }}  </label>
			<input type="checkbox" name="complete" id="complete">
		</div>
    <div>
      <label for="completed_at">Completed At :    </label>
      <input type="datetime-local" name="completed_at" id="completed_at">
	  </div>
		<div>
			<label for="exp">Experience Points:</label>
			<input type="number" name="exp" id="exp" min="0">
		</div>
		<button type="submit" id="todoCreate">Update</button>
</div>





<script>
/*
처리해야할 기능
1. 문서 로드후 초기화 :
2. 생성버튼 이벤트 바인딩 : 클릭이벤트등 UI 요소와 연결하는 작업
3. 버튼 클릭시 동작실행:
4. 폼 데이터 수집 :
5. 비어있는
6. 서버에 post 요청보내기
7. 요청 성공처리
8. 요청 실패처리 당연히 만들어줘야하는것
빈공백으로 데이터 넘길때
입력값 검증
UI 피드백 로딩중 저장중 ...성공했습니다.
날짜 유효성 검사:
*/

//1.초기화
const id = "{{ todo.id }}"
document.addEventListener('DOMContentLoaded', init);

//2.UI 이벤트
function init() {
  bindUIEvents(); // 버튼에 클릭 이벤트 연결  
}


//3.UI 이벤트 바인딩
async function bindUIEvents() {
  // const btn = document.getElementById('todoCreate');
  // if (!btn) return;
  // btn.addEventListener('click', onCreateClick); 
  const todo =await fetchTodo();
  console.log("todo : ", todo);
}


async function fetchTodo() {
    console.log(" 페치 데이터 ");
    return await axiosInstance.get(`/todo/api/retrieve/${id}`).then(res => res.data);
}




function updateTodo(data) {
  axiosInstance
    .post('/todo/api/update/', data)
    .then(onCreateSuccess) 
    .catch(onCreateError); 
}


</script>

{% endblock %}    